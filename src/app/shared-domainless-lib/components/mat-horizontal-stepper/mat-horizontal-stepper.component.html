<mat-horizontal-stepper #stepper [linear]="isLinear" (selectionChange)="onStepChange($event)">
  <mat-step *ngFor="let step of steps; let i = index">
    <app-mat-step-content-container
        #stepContentContainers
        [contentSchema]="step"
        [data]="data">
    </app-mat-step-content-container>
    <div>
      <button *ngIf="i > 0" mat-button matStepperPrevious>Back</button>
      <button *ngIf="i < steps.length - 1" mat-button matStepperNext>Next</button>
      <button
          *ngIf="i === steps.length - 1"
          mat-button
          [appButtonInfiniteProgress]="doneInProcess"
          (click)="doneWithData.emit(data)">
        Done
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
